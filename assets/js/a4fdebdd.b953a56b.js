"use strict";(self.webpackChunkcortisol=self.webpackChunkcortisol||[]).push([[41],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>f});var r=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var l=r.createContext({}),c=function(e){var t=r.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(o),m=n,f=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return o?r.createElement(f,a(a({ref:t},u),{},{components:o})):r.createElement(f,a({ref:t},u))}));function f(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=o.length,a=new Array(i);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:n,a[1]=s;for(var c=2;c<i;c++)a[c]=o[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,o)}m.displayName="MDXCreateElement"},4794:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=o(7462),n=(o(7294),o(3905));const i={title:"How-to guides",sidebar_position:7},a=void 0,s={unversionedId:"how-tos",id:"how-tos",title:"How-to guides",description:"Estimating log costs from stdout and stderr streams",source:"@site/docs/how-tos.md",sourceDirName:".",slug:"/how-tos",permalink:"/cortisol/how-tos",draft:!1,editUrl:"https://github.com/CortisolAI/cortisol/docs/docs/how-tos.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"How-to guides",sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Continuous Integration Visibility",permalink:"/cortisol/CI-visibility"}},l={},c=[{value:"Estimating log costs from stdout and stderr streams",id:"estimating-log-costs-from-stdout-and-stderr-streams",level:2},{value:"Local service",id:"local-service",level:3},{value:"Local service with docker",id:"local-service-with-docker",level:3}],u={toc:c},p="wrapper";function d(e){let{components:t,...o}=e;return(0,n.kt)(p,(0,r.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"estimating-log-costs-from-stdout-and-stderr-streams"},"Estimating log costs from stdout and stderr streams"),(0,n.kt)("p",null,"Often, we find ourselves using software like ",(0,n.kt)("a",{parentName:"p",href:"https://fluentbit.io/"},"fluent-bit")," to capture the stdout and stderr of\nour applications and forward them directly to our chosen observability provider.\nMany cloud providers offer this functionality as part of their managed Kubernetes offerings.\nWhen you use such a setup, you might not specify a file to store your logs within your logger.\nBut fear not, with cortisol, you can still easily estimate the cost of these logs. Here's how you can do it!"),(0,n.kt)("h3",{id:"local-service"},"Local service"),(0,n.kt)("p",null,"Assuming that you're already familiar with our ",(0,n.kt)("a",{parentName:"p",href:"/cortisol/getting-started/#your-first-log-cost-estimation"},"Your first log cost estimation guide"),",\nthe only change you need to make is to redirect the stdout and stderr streams to a file of your choice."),(0,n.kt)("p",null,"You can do this with a simple command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"python -m app.main >> /path/to/my_redirected_logs.log\n")),(0,n.kt)("p",null,"Once you've done this, you can use cortisol just as you normally would:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-terminal"},"cortisol logs cost-estimate --host http://127.0.0.1:8080 --users 10 --spawn-rate 5 --run-time 10s --cortisol-file cortisolfile.py --cortisol-file ./examples/cortisolfile.py --log-file /path/to/my_redirected_logs.log\n")),(0,n.kt)("h3",{id:"local-service-with-docker"},"Local service with docker"),(0,n.kt)("p",null,"If you're already familiar with our ",(0,n.kt)("a",{parentName:"p",href:"/cortisol/getting-started/#your-first-log-cost-estimation-with-docker"},"Your first log cost estimation with docker guide"),",\nthe only change you need to make is to redirect the stdout and stderr streams from your Docker container to a file outside of it."),(0,n.kt)("p",null,"Here's how you can do it:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"First, make sure you have the Docker CLI installed.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Open a new terminal and run the following command, replacing the ",(0,n.kt)("inlineCode",{parentName:"p"},"container-id")," with your own:"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-terminal"},"docker logs -f {container-id} >> /path/to/my_redirected_logs.log\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Now, run cortisol as usual:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-terminal"},"cortisol logs cost-estimate --host http://127.0.0.1:8080 --users 10 --spawn-rate 5 --run-time 10s --cortisol-file cortisolfile.py --cortisol-file ./examples/cortisolfile.py --log-file /path/to/my_redirected_logs.log\n")),(0,n.kt)("p",null,"There's no need to specify a ",(0,n.kt)("inlineCode",{parentName:"p"},"container-id")," in the ",(0,n.kt)("inlineCode",{parentName:"p"},"cost-estimate")," command because the log file is outside of the container. Enjoy easy log cost estimation with cortisol!"))}d.isMDXComponent=!0}}]);