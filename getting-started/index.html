<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-getting-started">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Getting Started | Cortisol</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/cortisol/img/cortisol_medium.png"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/cortisol/img/cortisol_medium.png"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/cortisol/getting-started"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Getting Started | Cortisol"><meta data-rh="true" name="description" content="Installation"><meta data-rh="true" property="og:description" content="Installation"><link data-rh="true" rel="icon" href="/cortisol/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/cortisol/getting-started"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cortisol/getting-started" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/cortisol/getting-started" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/cortisol/blog/rss.xml" title="Cortisol RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cortisol/blog/atom.xml" title="Cortisol Atom Feed"><link rel="stylesheet" href="/cortisol/assets/css/styles.6db9d945.css">
<link rel="preload" href="/cortisol/assets/js/runtime~main.7023452b.js" as="script">
<link rel="preload" href="/cortisol/assets/js/main.e840bdfd.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/cortisol/"><b class="navbar__title text--truncate">Cortisol</b></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cortisol/">What is Cortisol?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/cortisol/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cortisol/writing-a-cortisolfile">Writing a cortisolfile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cortisol/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cortisol/best-practices">Best practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cortisol/CI-visibility">Continuous Integration Visibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cortisol/how-tos">How-to guides</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cortisol/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Getting Started</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Getting Started</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisities">Prerequisities<a href="#prerequisities" class="hash-link" aria-label="Direct link to Prerequisities" title="Direct link to Prerequisities">​</a></h3><p>Cortisol requires one of the following Python versions: 3.8, 3.9, 3.10 or 3.11</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-cortisol">Install Cortisol<a href="#install-cortisol" class="hash-link" aria-label="Direct link to Install Cortisol" title="Direct link to Install Cortisol">​</a></h3><p>At the command line:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install cortisol</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you have an Apple M1 CPU, we suggest installing using Poetry as a dependency management. Otherwise, the underline gevent library may not work.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="your-first-log-cost-estimation">Your first log cost estimation<a href="#your-first-log-cost-estimation" class="hash-link" aria-label="Direct link to Your first log cost estimation" title="Direct link to Your first log cost estimation">​</a></h2><p>Let&#x27;s dive right in and get our hands dirty with Cortisol! As an integral part of your software development workflow, Cortisol CLI brings predictability to managing log costs. </p><p>First things first! We need a RESTful service and so you&#x27;ll need to do the following steps:</p><ol><li>Clone this example repo <a href="https://github.com/CortisolAI/getting-started-example" target="_blank" rel="noopener noreferrer">https://github.com/CortisolAI/getting-started-example</a></li><li><code>cd getting-started-example</code></li><li><code>mkvirtualenv getting-started-cortisol</code></li><li><code>python -m app.main</code> which will make the service available at <code>http://127.0.0.1:8080/</code></li></ol><p>And, now, it&#x27;s time to create your first cortisol file. Copy and paste the following in a file named <code>cortisolfile.py</code> in the root path of getting-started-example repo:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> locust </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> task</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> cortisol</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cortisollib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">users </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> CortisolHttpUser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">WebsiteUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CortisolHttpUser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#393A34">@task</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">my_task</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we define a class for the users that we will be simulating. It must always inherit from <code>CortisolHttpUser &lt;cortisollib.users.CortisolHttpUser&gt;</code>.</p><p>We&#x27;ve declared 1 task by decorating two methods with <code>@task</code>. The <code>my_task</code> method calls the root path of the restful service that just returns a simple JSON response.</p><p>You can define multiple tasks for each resource of your web service.</p><p>Almost there! It&#x27;s time to run the cortisol command and get your first log cost estimates. Before we do that, make sure you know the root path of where the getting-started-example repo is located. For illustration purposes, let&#x27;s assume the path is <code>/some/path/getting-started-example/</code>.</p><p>Switch to another terminal window, enable the <code>getting-started-cortisol</code> virtual env and run the following command in the terminal:</p><div class="language-terminal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-terminal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cortisol logs cost-estimate --host http://127.0.0.1:8080 --users 10 --spawn-rate 5 --run-time 10s --cortisol-file cortisolfile.py --log-file cortisol_app.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You&#x27;ll get some results after 10 seconds that look like these ones:</p><p><img loading="lazy" alt="Cortisol" src="/cortisol/assets/images/getting-started-results-bdbefa5b4f504bc0b9ace959b063c20e.png" width="643" height="373" class="img_ev3q"></p><p>Before we dive into the results, let&#x27;s understand what load testing ran in the background in order to receive the latter log cost estimates.</p><ul><li><code>--host http://127.0.0.1:8080</code> the FAST API runs at <code>http://127.0.0.1:8080</code></li><li><code>--users 10</code> The peak number of concurrent users is 10</li><li><code>--spawn-rate 5</code> Spawn 5 users per second</li><li><code>--run-time 10s</code> Stop after 10 seconds</li><li><code>--cortisol-file cortisolfile.py</code> path to cortisolfile</li><li><code>--log-file cortisol_app.log</code> path to where logs are saved</li></ul><p>Let&#x27;s get back to the results. The total log volume per month of running this FAST API with the defined user behaviour in the cortisolfile and in the cortisol command arguments is going to be available at the top of the table. The log costs per observability tool are per month and are explained below:</p><ul><li>Datadog: 30 day log retention and billed annually</li><li>Grafana: Cloud Pro plan is chosen</li><li>New Relic: Pro plan is chosen</li><li>GCP Cloud Logging: based on the pricing on their website</li></ul><p>Please, note that free tiers have been included to all the costs above</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="your-first-log-cost-estimation-with-docker">Your first log cost estimation with Docker<a href="#your-first-log-cost-estimation-with-docker" class="hash-link" aria-label="Direct link to Your first log cost estimation with Docker" title="Direct link to Your first log cost estimation with Docker">​</a></h2><p>Let&#x27;s do the same but run the FAST API in a Docker container.</p><ol><li>Clone this example repo <a href="https://github.com/CortisolAI/getting-started-example" target="_blank" rel="noopener noreferrer">https://github.com/CortisolAI/getting-started-example</a></li><li><code>cd getting-started-example</code></li><li><code>make build</code> to build the Docker image</li><li><code>make run</code> to run the container. The printed container ID is important. This command will make the service available at <code>http://127.0.0.1:8080/</code></li></ol><p>On another terminal window:</p><ol><li>Create a virtualenv <code>mkvirtualenv getting-started-cortisol</code></li><li><code>pip install cortisol</code></li></ol><p>You will need to pass the container ID, and just define the log file name. No need to pass the entire path to the log file:</p><div class="language-terminal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-terminal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cortisol logs cost-estimate --host http://127.0.0.1:8080 --users 10 --spawn-rate 5 --run-time 10s --cortisol-file cortisolfile.py --container-id d3a45b9e27ca03b52d2fe9d4c7c55f8254829555c96c6b79bc950caaf33719f8 --cortisol-file ./examples/cortisolfile.py --log-file cortisol_app.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And, you&#x27;ll get some results in 10 seconds.</p><p>Make sure to run <code>make stop</code> and <code>make clean</code> to stop/delete the Docker image and container.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/CortisolAI/cortisol/docs/docs/getting-started.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cortisol/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">What is Cortisol?</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cortisol/writing-a-cortisolfile"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Writing a cortisolfile</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#prerequisities" class="table-of-contents__link toc-highlight">Prerequisities</a></li><li><a href="#install-cortisol" class="table-of-contents__link toc-highlight">Install Cortisol</a></li></ul></li><li><a href="#your-first-log-cost-estimation" class="table-of-contents__link toc-highlight">Your first log cost estimation</a></li><li><a href="#your-first-log-cost-estimation-with-docker" class="table-of-contents__link toc-highlight">Your first log cost estimation with Docker</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 CortisolAI. Built with Docusaurus.</div></div></div></footer></div>
<script src="/cortisol/assets/js/runtime~main.7023452b.js"></script>
<script src="/cortisol/assets/js/main.e840bdfd.js"></script>
</body>
</html>